// For format details, see https://aka.ms/devcontainer.json. For config options, see the
// README at: https://github.com/devcontainers/templates/tree/main/src/rust
{
	"name": "Rust",
	// Or use a Dockerfile or Docker Compose file. More info: https://containers.dev/guide/dockerfile
	"image": "mcr.microsoft.com/devcontainers/rust:2-1-trixie",
	"hostRequirements": {
		"cpus": 4,
		"gpu": false
	},
	"features": {
		"ghcr.io/devcontainers/features/python": {
			"version": "3.14",
			"installTools": true,
			"toolsToInstall": "uv"
		}
	},
	"portsAttributes": {
		"\\./server.py": {
			"label": "Slides Server",
			"protocol": "http",
			"onAutoForward": "openPreview"
		}
	},
	"initializeCommand": {
		"gitconfig": ".devcontainer/gitconfig.sh init"
	},
	"onCreateCommand": {
		"reveal.js": "git submodule init && git submodule update"
	},
	"postAttachCommand": {
		"gitconfig": ".devcontainer/gitconfig.sh postAttach"
	},
	"customizations": {
		"vscode": {
			"extensions": [],
			"settings": {}
		}
	},
	"secrets": {
		"SNCF_API_KEY": {"description": "SNCF API Key", "documentationUrl": "https://numerique.sncf.com/startup/api/token-developpeur/"}
	}
}